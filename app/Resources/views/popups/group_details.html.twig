<div class="edit_group">
    <div class="left">
        <header>
            <a id="edit_group_close" href="#" class="close_modal close-modal"><i class="fa fa-times"></i></a>
            <p>{{ group.name }}</p>
            <i class="fa fa-angle-double-down"></i>
            <div class="hidden">{{ group.description }}</div>
        </header>

        <ul class="tabs">
            <li>
                <a id="group_members" href="#">
                    {{ 'Group members'|trans }}
                </a>
            </li>
            {% if is_granted('EDIT', group) %}
                <li>
                    <a id="add_members" href="#">
                        <i class="rounded fa fa-plus"></i>{{ 'Add members'|trans }}
                    </a>
                </li>
            {% endif %}
        </ul>

        <div id="group_members_tab">
            <div class="search_container">
                <div class="input_container">
                    <i class="fa fa-search"></i>
                    <input id="searchInput" type="text"/>
                </div>
            </div>

            <ul class="users">
                {% for member in members %}
                    <li>
                        <div>
                            <p>{{ member.user.name }}</p>
                            <span>{{ member.user.email }}&nbsp;</span>
                        </div>

                        {% if is_granted('EDIT', group) %}
                            <a href="#" data-url="{{ path('membership_delete', {groupId: group.id, userId: member.user.id}) }}" class="delete rounded">
                                <i class="fa fa-minus"></i>
                            </a>

                            <select name="roles" class="roles" data-url="{{ path('membership_update', {groupId: group.id, userId: member.user.id}) }}">
                                <option value="admin" {% if member.role == 'admin' %}selected{% endif %}>
                                    {{ 'Admin'|trans }}
                                </option>
                                <option value="member" {% if member.role == 'member' %}selected{% endif %}>
                                    {{ 'Member'|trans }}
                                </option>
                            </select>
                        {% else %}
                            {{ member.role }}
                        {% endif %}
                    </li>
                {% endfor %}
            </ul>
        </div>

        {% if is_granted('EDIT', group) %}
            <div id="add_members_tab hidden">
                <div class="search_container">
                    <div class="input_container">
                        <i class="fa fa-search"></i>
                        <input id="searchInput" type="text"/>
                    </div>
                </div>

                <ul class="users">
                    {% for user in users %}
                        <li>
                            <div>
                                <p>{{ user.name }}</p>
                                <span>{{ user.email }}&nbsp;</span>
                            </div>

                            <a href="#" data-url="{{ path('membership_add', {groupId: group.id, userId: user.id}) }}" class="add rounded">
                                <i class="fa fa-plus"></i>
                            </a>
                        </li>
                    {% endfor %}
                </ul>
            </div>
        {% endif %}
    </div>

    {% if is_granted('EDIT', group) %}
    <ul class="icons right">
        <li>
            <a id="edit_group" href="#"><i class="fa fa-edit"></i></a>
        </li>
        <li>
            <a id="download_group" href="#"><i class="fa fa-download"></i></a>
        </li>
        <li>
            <a id="delete_group" href="#"><i class="fa fa-trash"></i></a>
        </li>
    </ul>
    {% endif %}
</div>
